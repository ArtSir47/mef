

# Creation of Backend package from template

> Для розробки знадобиться  IDE з підтримкою написання коду на мові програмування C#. Для написання даної інструкції використовувалась [VisualStudio](https://visualstudio.microsoft.com/vs/).

> Також необхідна наявність [dotnet CLI](https://docs.microsoft.com/ru-ru/dotnet/core/tools/dotnet)

## Repository cloning

Розробку першого плагіна розпочнемо з клонування GIT репозиторію **[tutorial-backend-plugin](https://github.com/mef-dev/tutorial-backend-plugin)**.
```
git clone https://github.com/mef-dev/tutorial-backend-plugin.git
```

## Content overview

Після завантаження, та відкриття проекту можемо оглянути вміст.

|![вміст проекту](/Images/dev_guides/create_backend_plugin/1.png)|
| :--: |

Унікальним ідентифікатором на платформі є назва проекту, а також назва сутності (entity). При створенні власного проекту перейменовуємо проект і модифікуємо назву сутності.

## Build

Для збірки плагіна можна скористатися командою
```
dotnet publish -o bin\Deploy --force
```
Та заархівувати вміст теки `bin\Deploy`. 

##  Registration package

Для початку перейдемо на сторінку створення плагіну. 

|![Cторінкa створення](/Images/dev_guides/create_ui_plugin/2.png)|
| :--: |

Вона знаходиться в пункті меню `Плагіни` 

Після чого ми попадаємо на сторінку створення плагінів. 

Аліас- назва предметної області плагіну. Ім'я- назва плагіну. Вооодимо ці данні, і переходимо до типу. У платформі існує 4 основних типи плагінів. Про відмінності між ними написано в блоці допомоги. Зараз нас цікавить тип `Service`- плагін, що містить лише API складову, без користувацької конфінурації. Вибираємо його.

 Після вибору у нас активувався `Backend` блок. Він містить лише одне поле `PluginMefName`. Це є назва нашого проекту. Вводимо назву з репозиторію, після чого нажимаємо кнопку **Зберегти**.
 
##  Uploading version of package

Для завантаження готового ZIP-архіву плагіну на платформу, необхідно, на сторінці конфігерації в блоці *Backend* натиснути кнопук **Завантажити нову версію**.

|![Cторінкa створення](/Images/dev_guides/create_backend_plugin/2.png)|
| :--: |

Після завантаження, в дропдауні необхідно вибрати необхідну версію та натиснути кнопку **Зберегти**
 
##  Package Dry run

Провіряти роботу API плагінів можна любою програмою-сніфером. В данному випадку використовуватиметься *Postman*.

Для відправлення запитів потрібно авторизуватися – зазвичай використовується схема авторизації із токеном користувача в платформі, алє для тестування ми застосуємо `Basic Auth`. Необхідну пару логін-пароль доступу до API можна створити в розділі [SETTINGS \ CREDENTIALS]( https://preview.mef.dev/console/settings/credentials) свого профілю, куди можна потрапити натиснувши на іконку користувача у верхньому правому кутку і вибравши пункт меню SETTINGS. Після натискання на кнопку `ADD` Ви зможете задати логін користувача і пароль для авторизації Basic Auth

### Базова перевірка працездатності
В межах платформи існує endpoint для перевірки працездатності плагіна:
```
https://preview.mef.dev/api/v1/<alias>/plugins/<PluginMefName>/version.json?detaillevel=detailed
```

|![detaillevel=detailed](/Images/dev_guides/create_backend_plugin/3.png)|
| :--: |

У випадку схожого результату, важ плагін успішно завантажений на платформу, та готовий до роботи.

### Запити до плагіна 
Надсилання запитів до плагіна продемонструємо на прикладі GET запитів.

Для надсилання запитів використовується шаблон:
```
https://preview.mef.dev/api/v1/<alias>/<EntityName>
```
При цьому в тіло запиту можна добавляти будь-які параметри\хедери\поля, проте варто відобразити їх у вхідній моделі плагіна.
 
|![detaillevel=detailed](/Images/dev_guides/create_backend_plugin/4.png)|
| :--: |

### Запити до Action

Action  можуть сприймати лише POST запити, Які формуються за формулою:
```
https://preview.mef.dev/api/v1/<alias>/<EntityName>/<ActionName>.json
```
|![detaillevel=detailed](/Images/dev_guides/create_backend_plugin/5.png)|
| :--: |

> Реалізацію цих запитів також можна побачити в Ангуляр-аплікаці [tutorial-ui-plugin](https://github.com/mef-dev/tutorial-ui-plugin).
